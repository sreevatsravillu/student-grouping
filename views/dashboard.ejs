<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link rel="stylesheet" href="./../public/style.css">
  <style>
    body {
      display: flex;
      min-height: 100vh;
      flex-direction: column;
    }
    main {
      flex: 1 0 auto;
      padding-left: 100px;
    }
    nav {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 997;
    }
    .sidenav {
      width: 220px !important;
      height: calc(100% - 64px);
      top: 64px;
      border-right: 1px solid #ddd;
    }
    .main-content {
      margin-top: 84px;
    }
    .chip-container {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .chip {
      display: inline-flex;
      align-items: center;
      height: 32px;
      padding: 0 12px;
      font-size: 13px;
      border-radius: 16px;
    }
    .chip i {
      margin-right: 4px;
    }
    .group-name {
      font-weight: 500;
    }
    .highlight tbody tr:hover {
      background-color: rgba(0, 0, 0, 0.04);
    }
    .table-container {
      overflow-x: auto;
    }
    table.bordered {
      border: 1px solid rgba(177, 174, 174);
      border-collapse: collapse;
    }
    table.bordered th, table.bordered td {
      border: 1px solid rgba(177, 174, 174);
    }
    thead {
      background-color: #1565c0 !important;
    }
    th, td {
      padding: 16px !important;
      border-bottom: 1px solid rgba(177, 174, 174);
    }
    td:not(:last-child), th:not(:last-child) {
      border-right: 1px solid rgba(177, 174, 174);
    }
    @media only screen and (max-width: 992px) {
      main {
        padding-left: 0;
      }
      .sidenav {
        height: 100%;
        top: 0;
      }
    }
  </style>
</head>
<body>
  <nav class="blue darken-3">
    <div class="nav-wrapper">
      <a href="#" data-target="slide-out" class="sidenav-trigger hide-on-large-only">
        <i class="material-icons">menu</i>
      </a>
      <a href="#" class="brand-logo">Student Groups Dashboard</a>
    </div>
  </nav>

  <ul id="slide-out" class="sidenav sidenav-fixed">
    <li><a href="/form-builder" class="waves-effect"><i class="material-icons">build</i>Form Builder</a></li>
    <li><a href="/student-form" class="waves-effect"><i class="material-icons">person_add</i>Student Form</a></li>
  </ul>

  <main>
    <div class="container main-content">
      <div class="table-container">
        <table class="highlight bordered responsive-table">
          <thead>
            <tr>
              <th>Group</th>
              <th>Students</th>
              <th>Skills</th>
            </tr>
          </thead>
          <tbody>
            <% for (const group in groups) { %>
              <tr>
                <td class="group-cell">
                  <div class="group-name"><%= group %></div>
                </td>
                <td>
                  <div class="chip-container">
                    <% groups[group].students.forEach(student => { %>
                      <div class="chip">
                        <i class="material-icons tiny">person</i>
                        <%= student %>
                      </div>
                    <% }) %>
                  </div>
                </td>
                <td>
                  <div class="chip-container">
                    <% Array.from(groups[group].skills).forEach(skill => { %>
                      <div class="chip blue-grey lighten-4">
                        <i class="material-icons tiny">code</i>
                        <%= skill %>
                      </div>
                    <% }) %>
                  </div>
                </td>
              </tr>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const elems = document.querySelectorAll('.sidenav');
      M.Sidenav.init(elems, { edge: 'left', draggable: true });
    });
  </script>
</body>
</html>
